var sangbok=angular.module("sangbok",["ngRoute","mm.foundation"]).config(["$routeProvider",function(a){"use strict";a.when("/",{templateUrl:"partials/home.html",controller:"HomeCtrl"}).when("/song/:chapter/:song",{templateUrl:"partials/song.html",controller:"SongCtrl"}).otherwise({redirectTo:"/"})}]).factory("Songs",["$http",function(a){var b,c={async:function(){return b||(b=a.get("chapter").then(function(a){return a.data})),b}};return c}]).filter("sbNewlines",["$sce",function(a){return function(b){return b?a.trustAsHtml(b.replace(/\n/g,"<br/>")):""}}]);sangbok.controller("HomeCtrl",["$scope","Songs",function(a,b){"use strict";b.async().then(function(b){a.chapters=b})}]),sangbok.controller("SongCtrl",["$scope","$routeParams","Songs",function(a,b,c){"use strict";c.async().then(function(c){if(a.song=c[b.chapter-1].songs[b.song-1],a.song.melodyfile){var d,e;d="sound/"+a.song.melodyfile,e=new Audio,e.addEventListener("ended",function(){a.$apply(a.pause)}),e.addEventListener("canplay",function(){a.$apply(function(){a.melody=e})}),e.src=d+"."+(e.canPlayType("audio/ogg")?"ogg":"mp3")}}),a.play=function(){a.melody.currentTime=0,a.melody.play()},a.pause=function(){a.melody.pause()}}]),sangbok.controller("OfflineCtrl",["$scope","$http","Songs",function(a,b){a.ERROR=0,a.OFFLINE=1,a.SYNCED=2,a.status=a.SYNCED,a.progress=0,window.applicationCache.addEventListener("error",function(){a.status=a.ERROR},!1),b.get("online").success(function(b){b.online||(a.status=a.OFFLINE)})}]);
//# sourceMappingURL=sangbok.js.map